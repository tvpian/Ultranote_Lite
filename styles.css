/* Extracted styles from index.html to make the project easier to maintain.
   This file contains all of the CSS previously inlined in the HTML.
   Color variables and responsive rules have been preserved. */

:root {
  --bg: #0b0f14;
  --fg: #e8eef7;
  --muted: #a9b6c6;
  --card: #121924;
  --acc: #4ea1ff;
  /* Additional semantic color variables for borders, buttons and inputs */
  --border: #1e2938;
  --btn-bg: #122134;
  --btn-border: #274768;
  --pill-border: #334759;
  --header-bg: #0e141d;
  --input-bg: #0f1621;
  --input-border: #203041;
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: system-ui, Segoe UI, Roboto, Helvetica, Arial;
  background: var(--bg);
  color: var(--fg);
  /* Improve readability on all devices by increasing base font size and line height. */
  font-size: 15px;
  line-height: 1.5;
}

header {
  display: flex;
  gap: 12px;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
  background: var(--header-bg);
  position: sticky;
  top: 0;
  z-index: 10;
  border-bottom: 1px solid var(--border);
}

.title {
  font-weight: 700;
  letter-spacing: 0.3px;
}

.search {
  flex: 1;
  max-width: 520px;
}

input[type="text"],
textarea {
  width: 100%;
  /* Use !important to override inline attributes in HTML */
  background: var(--input-bg) !important;
  border: 1px solid var(--input-border) !important;
  color: var(--fg) !important;
  padding: 10px;
  border-radius: 10px;
  outline: none;
}

textarea {
  min-height: 140px;
  resize: vertical;
}

/* Override inline styles for date inputs to use theme variables */
input[type="date"] {
  background: var(--input-bg) !important;
  border: 1px solid var(--input-border) !important;
  color: var(--fg) !important;
}

main {
  display: grid;
  grid-template-columns: 280px 1fr;
  gap: 16px;
  padding: 16px;
}

aside {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 12px;
  height: calc(100dvh - 88px);
  position: sticky;
  top: 88px;
  overflow: auto;
}

nav button {
  width: 100%;
  text-align: left;
  background: var(--btn-bg);
  border: 1px solid var(--btn-border);
  color: var(--fg);
  padding: 10px 12px;
  margin: 6px 0;
  border-radius: 10px;
  cursor: pointer;
}

nav button.active {
  border-color: var(--acc);
  outline: 2px solid color-mix(in oklab, var(--acc) 40%, transparent);
}

.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 14px;
  margin-bottom: 16px;
}

.row {
  display: flex;
  gap: 10px;
  align-items: center;
}

.btn {
  /* Force override of any inline button color definitions */
  background: var(--btn-bg) !important;
  border: 1px solid var(--btn-border) !important;
  color: var(--fg) !important;
  padding: 8px 12px;
  border-radius: 10px;
  cursor: pointer;
}

.btn.acc {
  border-color: var(--acc) !important;
}

.pill {
  display: inline-block;
  padding: 2px 8px;
  border: 1px solid var(--pill-border);
  border-radius: 999px;
  font-size: 12px;
  color: var(--muted);
  margin-right: 6px;
}


/* --- Monthly view styling --- */
/* Monthly page now uses standard app styling for consistency */

/* Improved day selection with checkboxes */
.monthly-days-grid {
  display: flex;
  flex-direction: column;
  gap: 1px;
  background: var(--input-bg);
  border: 1px solid var(--input-border);
  border-radius: 8px;
  padding: 6px;
  /* Let the container grow up to seven rows (~28px each) and scroll if necessary. */
  max-height: 196px;
  overflow-y: auto;
}

.monthly-day-option {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 2px 8px;
  border-radius: 2px;
  cursor: pointer;
  font-size: 13px;
  transition: background-color 0.2s ease;
}

.monthly-day-option:hover {
  background: var(--card);
}

.monthly-day-option input[type="checkbox"] {
  margin: 0;
  accent-color: var(--acc);
}

.monthly-day-option input[type="checkbox"]:checked + span {
  font-weight: 500;
  color: var(--acc);
}

/* Task list view modes */
.monthly-tasks-container.grid-view {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 12px;
}

.monthly-tasks-container.list-view {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.monthly-tasks-container.grid-view .monthly-task-item {
  background: var(--input-bg);
  border: 1px solid var(--input-border);
  border-radius: 8px;
  padding: 12px;
  transition: all 0.2s ease;
  min-height: 80px;
}

.monthly-tasks-container.list-view .monthly-task-item {
  background: var(--input-bg);
  border: 1px solid var(--input-border);
  border-radius: 8px;
  padding: 10px 12px;
  transition: all 0.2s ease;
}

.monthly-task-item:hover {
  border-color: var(--acc);
  transform: translateY(-1px);
}

.monthly-task-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 6px;
}

.monthly-task-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--fg);
  line-height: 1.3;
  flex: 1;
  margin-right: 8px;
}

.monthly-task-delete {
  padding: 3px 6px;
  font-size: 11px;
  border-radius: 4px;
  background: transparent;
  border: 1px solid #ff6b6b;
  color: #ff6b6b;
  transition: all 0.2s ease;
  cursor: pointer;
  flex-shrink: 0;
}

.monthly-task-delete:hover {
  background: #ff6b6b;
  color: white;
}

.monthly-task-schedule {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  flex-wrap: wrap;
}

.monthly-schedule-badge {
  background: var(--acc);
  color: white;
  padding: 2px 6px;
  border-radius: 10px;
  font-size: 11px;
  font-weight: 500;
}

/* View toggle buttons */
#monthlyViewGrid.active,
#monthlyViewList.active {
  background: var(--acc);
  color: white;
  border-color: var(--acc);
}

/* Legacy styles maintained for backward compatibility */
.monthly .monthly-select {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-width: 120px;
}

.monthly .monthly-select label {
  font-size: 12px;
  margin-bottom: 4px;
  color: var(--muted);
}

.monthly .monthly-select select {
  background: var(--input-bg);
  border: 1px solid var(--input-border);
  color: var(--fg);
  padding: 6px;
  border-radius: 8px;
  width: 100px;
  height: 160px;
}

/* Style each scheduled task row in the monthly list */
.monthly #monthlyTasksList > .row {
  background: var(--input-bg);
  border: 1px solid var(--input-border);
  border-radius: 10px;
  padding: 6px 10px;
}

/* Make the pill stand out a bit more in the monthly list */
.monthly #monthlyTasksList .pill {
  background: var(--btn-bg);
  border-color: var(--pill-border);
  color: var(--acc);
}

/* Responsive grid layout for monthly form */
@media (max-width: 700px) {
  .monthly-container .card:first-child > div:nth-child(2) {
    grid-template-columns: 1fr !important;
    gap: 12px !important;
  }
  
  .monthly-container .card:first-child .row:last-child {
    flex-direction: column;
    align-items: stretch;
    gap: 12px;
  }
  
  .monthly-container .card:first-child .row:last-child > div:first-child {
    justify-content: center;
  }
  
  .monthly-tasks-container.grid-view {
    grid-template-columns: 1fr;
  }
}


.list {
  display: grid;
  gap: 8px;
}

/*
 * Ensure task titles wrap cleanly on small screens or when very long.
 * Without this, long titles can overflow and push action buttons off screen.
 */
#taskList .row span,
#projectTaskList .row span,
#backlogList .row span {
  /* Allow text to wrap onto multiple lines */
  word-break: break-word;
  overflow-wrap: anywhere;
  white-space: normal;
  /* Let the text column grow and shrink within its row */
  flex: 1;
  min-width: 0;
}

/* Align multi-line rows to the top instead of center so that
 * checkboxes and buttons remain aligned when titles wrap.
 */
#taskList .row,
#projectTaskList .row,
#backlogList .row {
  align-items: flex-start;
}

.muted {
  color: var(--muted);
  font-size: 12px;
}

.grid-2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

/* Responsive grid: stack cards on narrow screens */
@media (max-width: 600px) {
  .grid-2 {
    grid-template-columns: 1fr;
  }
}

/* Review page specific layout tweaks */
.review .row {
  /* Allow rows to wrap on small screens so content doesn’t overflow */
  flex-wrap: wrap;
  align-items: flex-start;
}

/* Keep inner action rows (button groups) on one line */
.review .row > .row {
  flex-wrap: nowrap;
}

/* Allow tables in review to scroll horizontally if they exceed width */
.review table {
  display: block;
  overflow-x: auto;
  max-width: 100%;
}

footer {
  padding: 16px;
  color: var(--muted);
  text-align: center;
}

a {
  color: var(--acc);
}

.tip {
  position: fixed;
  inset: auto 16px 16px 16px;
  background: var(--header-bg);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 14px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.tip h4 {
  margin: 0 0 6px 0;
}

.kbd {
  border: 1px solid var(--kbd-border);
  border-radius: 6px;
  padding: 0 6px;
  margin: 0 3px;
}

.hidden {
  display: none;
}

/* Markdown preview styling - Enhanced for better readability */
.markdown-preview {
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 20px;
  background: var(--input-bg);
  max-height: 400px;
  overflow-y: auto;
  color: var(--fg);
  font-size: 15px;
  line-height: 1.6;
  font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  outline: none; /* Remove default focus outline */
}

/* Focus state for keyboard navigation */
.markdown-preview:focus {
  border-color: var(--acc);
  box-shadow: 0 0 0 2px rgba(78, 161, 255, 0.2);
}

/* Enhanced typography hierarchy */
.markdown-preview h1 { 
  font-size: 1.8em; 
  margin-top: 1.2em; 
  margin-bottom: 0.6em; 
  font-weight: 700;
  color: var(--acc);
  border-bottom: 2px solid var(--border);
  padding-bottom: 0.3em;
}
.markdown-preview h2 { 
  font-size: 1.5em; 
  margin-top: 1.1em; 
  margin-bottom: 0.5em; 
  font-weight: 600;
  color: var(--fg);
}
.markdown-preview h3 { 
  font-size: 1.3em; 
  margin-top: 1em; 
  margin-bottom: 0.5em; 
  font-weight: 600;
  color: var(--fg);
}
.markdown-preview h4 { 
  font-size: 1.2em; 
  margin-top: 0.9em; 
  margin-bottom: 0.4em; 
  font-weight: 600;
  color: var(--muted);
}
.markdown-preview h5 { 
  font-size: 1.1em; 
  margin-top: 0.8em; 
  margin-bottom: 0.4em; 
  font-weight: 600;
  color: var(--muted);
}
.markdown-preview h6 { 
  font-size: 1em; 
  margin-top: 0.8em; 
  margin-bottom: 0.4em; 
  font-weight: 600;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Enhanced paragraph spacing */
.markdown-preview p {
  margin-bottom: 1em;
  line-height: 1.7;
}

/* Better list styling */
.markdown-preview ul, .markdown-preview ol { 
  margin: 0.8em 0 1.2em 1.5em; 
  padding-left: 0; 
}
.markdown-preview li { 
  margin-bottom: 0.6em; 
  line-height: 1.6;
}
.markdown-preview ul li {
  list-style-type: disc;
}
.markdown-preview ol li {
  list-style-type: decimal;
}

/* Enhanced code blocks */
.markdown-preview pre {
  background: var(--card);
  padding: 16px;
  border-radius: 8px;
  overflow-x: auto;
  margin: 1.2em 0;
  border: 1px solid var(--border);
  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
  font-size: 14px;
  line-height: 1.4;
  box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
}

/* Enhanced inline code */
.markdown-preview code {
  background: var(--card);
  padding: 3px 6px;
  border-radius: 4px;
  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
  font-size: 0.9em;
  color: var(--acc);
  border: 1px solid var(--border);
}

/* Code blocks should not have the inline code styling */
.markdown-preview pre code {
  background: transparent;
  padding: 0;
  border: none;
  color: var(--fg);
  font-size: inherit;
}

/* Enhanced blockquotes */
.markdown-preview blockquote {
  border-left: 4px solid var(--acc);
  padding: 12px 16px;
  margin: 1.2em 0;
  background: var(--card);
  border-radius: 0 8px 8px 0;
  font-style: italic;
  color: var(--muted);
}

/* Enhanced links */
.markdown-preview a {
  color: var(--acc);
  text-decoration: none;
  border-bottom: 1px solid transparent;
  transition: border-color 0.2s ease;
}
.markdown-preview a:hover {
  border-bottom-color: var(--acc);
}

/* Enhanced tables */
.markdown-preview table {
  width: 100%;
  border-collapse: collapse;
  margin: 1.2em 0;
  background: var(--card);
  border-radius: 8px;
  overflow: hidden;
}
.markdown-preview th, .markdown-preview td {
  padding: 12px 16px;
  text-align: left;
  border-bottom: 1px solid var(--border);
}
.markdown-preview th {
  background: var(--bg);
  font-weight: 600;
  color: var(--acc);
}

/* Enhanced horizontal rules */
.markdown-preview hr {
  border: none;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--border), transparent);
  margin: 2em 0;
}

/* Enhanced emphasis */
.markdown-preview strong {
  font-weight: 700;
  color: var(--fg);
}
.markdown-preview em {
  font-style: italic;
  color: var(--muted);
}

/* Project selector container for mobile: visible on small screens, hidden on desktop */
#projectSelectorContainer {
  /* Container for the project drop‑down in mobile view */
  margin-bottom: 8px;
}
@media (min-width: 901px) {
  /* Hide the selector on larger screens; the sidebar is used instead */
  #projectSelectorContainer {
    display: none;
  }
}

/* Remove sticky positioning so the selector doesn’t float over content on mobile */
@media (max-width: 900px) {
  #projectSelectorContainer {
    position: static;
    top: auto;
    z-index: auto;
  }
}

/* ------------------------------------------------------------------ */
/* Custom modal styles for confirmations and prompts                  */
/* These modals are used instead of native browser dialogs to match  */
/* the app’s look and feel.                                          */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 500;
}
.modal {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 16px;
  width: 90%;
  max-width: 360px;
  color: var(--fg);
}
.modal-body {
  margin-bottom: 12px;
  line-height: 1.4;
}
.modal-footer {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}
.modal input[type="text"],
.modal input[type="date"],
.modal textarea {
  width: 100%;
  margin-top: 8px;
  background: var(--input-bg);
  border: 1px solid var(--input-border);
  color: var(--fg);
  border-radius: 8px;
  padding: 8px;
  box-sizing: border-box;
}
.modal .btn {
  /* Buttons inside modal should follow theme */
  background: var(--btn-bg);
  border: 1px solid var(--btn-border);
  color: var(--fg);
  border-radius: 8px;
  padding: 6px 10px;
  cursor: pointer;
  font-size: 14px;
}
.modal .btn.acc {
  border-color: var(--acc);
}

/* Project sidebar buttons */
.projBtn {
  width: 100%;
  text-align: left;
  background: var(--btn-bg);
  border: 1px solid var(--btn-border);
  color: var(--fg);
  padding: 8px 10px;
  margin: 4px 0;
  border-radius: 10px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.projBtn.active {
  border-color: var(--acc);
  outline: 2px solid color-mix(in oklab, var(--acc) 40%, transparent);
}

.projBtn .projDel {
  font-size: 12px;
  opacity: 0.55;
  padding: 2px 6px;
  border-radius: 6px;
  cursor: pointer;
}

.projBtn .projDel:hover {
  opacity: 1;
  background: var(--btn-active-bg);
  color: #ff6b6b;
}

/* Responsive enhancements */
#menuToggle {
  display: none;
  margin-right: 8px;
}

.hide-mobile {
  display: block;
}

#mobileBar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: var(--header-bg);
  border-top: 1px solid var(--border);
  display: none;
  z-index: 120;
  padding: 6px 8px;
  gap: 6px;
}

#sketchModal {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 300;
  padding: 16px;
}

#sketchModal.show {
  display: flex;
}

#sketchModal .sketchInner {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 12px;
  max-width: 100%;
}

#sketchPad {
  background: var(--input-bg);
  border: 1px solid var(--btn-border);
  border-radius: 12px;
  touch-action: none;
  max-width: 100%;
  height: auto;
}

#mobileBar .btn.active {
  border-color: var(--acc);
  background: var(--btn-active-bg);
}

@media (max-width: 900px) {
  main {
    grid-template-columns: 1fr;
  }
  aside {
    position: fixed;
    top: 0;
    left: 0;
    height: 100dvh;
    transform: translateX(-100%);
    transition: transform 0.25s;
    background: var(--card);
    width: 260px;
    z-index: 200;
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.4);
  }
  body.drawer-open aside {
    transform: translateX(0);
  }
  body.drawer-open:after {
    content: '';
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(2px);
    z-index: 150;
  }
  #menuToggle {
    display: inline-block;
  }
  .hide-mobile {
    display: none;
  }
  #mobileBar {
    display: flex;
  }
  body {
    padding-bottom: 74px;
  }
  header {
    gap: 6px;
  }
  /* Stack cards when grid-2 is used on mobile to prevent narrow columns */
  .grid-2 {
    grid-template-columns: 1fr;
  }
  /* Increase scratchpad height on mobile to make it usable */
  #scratch {
    min-height: 250px;
  }
  /* Show a visible add button for quick task entry in mobile */
  #taskAddBtn {
    display: inline-block;
  }

  /* Stack quick capture input and button vertically on narrow screens for better accessibility */
  #quickCapture {
    flex: 1 1 100%;
    min-width: 0;
    width: 100%;
  }
  #captureBtn {
    width: 100%;
  }

  /* Stack task input, priority, due date, and Add button vertically on mobile */
  #taskTitle,
  #taskPriority,
  #taskDueDate,
  #taskAddBtn {
    width: 100%;
  }

/* Voice recorder modal */
#voiceModal {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 300;
  padding: 16px;
}

#voiceModal.show {
  display: flex;
}

#voiceModal .sketchInner {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 12px;
  max-width: 100%;
}

/* Make the mobile bar scroll horizontally on small screens */
#mobileBar {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scroll-snap-type: x mandatory;
}

#mobileBar .btn {
  /* Override inline flex values on mobile bar buttons to allow horizontal scrolling */
  flex: 0 0 auto !important;
  scroll-snap-align: start;
  white-space: nowrap;
}

/* Add subtle gradient edges to hint scrollability */
#mobileBar::before,
#mobileBar::after {
  content: "";
  position: sticky;
  top: 0;
  width: 16px;
  height: 100%;
  z-index: 1;
  pointer-events: none;
}

#mobileBar::before {
  left: 0;
  background: linear-gradient(to right, var(--header-bg), rgba(14, 20, 29, 0));
}

#mobileBar::after {
  right: 0;
  background: linear-gradient(to left, var(--header-bg), rgba(14, 20, 29, 0));
}

/* Monthly day selector overflow adjustments */
.monthly-days-grid {
  overflow-y: auto;
  max-height: 196px;
}

.monthly .monthly-select select {
  height: auto;
  /* Match the height of seven day items (~196px) and allow scroll */
  max-height: 196px;
  overflow-y: auto;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.monthly-day-option span {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  flex: 1;
}

  /* Remove sticky positioning of project selector on mobile */
  #projectSelectorContainer {
    /* previously sticky; now static so it scrolls naturally */
    position: static;
    top: auto;
    z-index: auto;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    margin-bottom: 8px;
  }
}

/* Hide the task add button on larger screens since Enter key works well */
@media (min-width: 901px) {
  #taskAddBtn {
    display: none;
  }
}

.btn.danger {
  color: var(--danger-color, #ff6b6b);
  border-color: var(--danger-color, #ff6b6b);
  background: transparent;
}
.btn.danger:hover {
  background: var(--danger-color, #ff6b6b);
  color: var(--bg, #fff);
}

/* Modal styling for link and task edit modals */
#linkModal,
#taskModal {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 300;
  padding: 16px;
}
#linkModal.show,
#taskModal.show {
  display: flex;
}
#linkModal .sketchInner,
#taskModal .sketchInner {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 16px;
  max-width: 100%;
  max-height: 90vh;
  overflow-y: auto;
}

/* Enhanced width and layout specifically for the Task Edit modal to better show long subtasks */
#taskModal .sketchInner {
  width: 720px;              /* Give the edit panel a comfortable readable width */
  max-width: 95vw;           /* Still remain responsive on very small screens */
}

/* Allow subtask rows to wrap text nicely */
#taskModal .subtask-row {
  display: flex;
  align-items: flex-start;
  gap: 6px;
  margin-bottom: 6px;
}
#taskModal .subtask-row input.subtask-title {
  flex: 1;
  min-width: 0;              /* Prevent overflow when long words exist */
  white-space: normal;        /* Allow wrapping */
}

/* Slightly taller description area for better visibility */
#taskModal textarea {
  min-height: 120px;
  resize: vertical;
}

/* ---- Enhanced Note Map ---- */
.map-card { padding: 20px; }
.map-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 18px;
  flex-wrap: wrap;
}
.map-stat { font-size: 12px; color: var(--muted); }
.map-filter-input {
  flex: 0 0 220px;
  padding: 6px 12px;
  border-radius: 20px;
  border: 1px solid var(--border);
  background: var(--input-bg);
  color: var(--fg);
  font-size: 13px;
  outline: none;
}
.map-filter-input:focus { border-color: var(--acc); }
.mind-map { list-style: none; padding: 0; margin: 0; }
.map-li { margin: 4px 0; }
.map-node {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
}
.map-toggle {
  width: 20px; height: 20px;
  border: none;
  background: transparent;
  color: var(--muted);
  cursor: pointer;
  font-size: 13px;
  padding: 0;
  line-height: 1;
  flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
  border-radius: 4px;
}
.map-toggle:hover { color: var(--fg); background: var(--btn-bg); }
.map-toggle-ph { width: 20px; flex-shrink: 0; display: inline-block; }
.map-chip {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  padding: 3px 11px;
  border-radius: 20px;
  border: 1px solid var(--chip-color, var(--acc));
  background: color-mix(in srgb, var(--chip-color, var(--acc)) 11%, transparent);
  color: var(--fg);
  text-decoration: none;
  font-size: 13px;
  transition: background 0.15s, transform 0.1s;
  white-space: nowrap;
  max-width: 320px;
  overflow: hidden;
  text-overflow: ellipsis;
}
.map-chip:hover {
  background: color-mix(in srgb, var(--chip-color, var(--acc)) 28%, transparent);
  transform: translateY(-1px);
}
.map-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 18px; height: 18px;
  padding: 0 4px;
  border-radius: 9px;
  background: var(--chip-color, var(--acc));
  color: #fff;
  font-size: 10px;
  font-weight: 700;
  line-height: 1;
}
.map-badge--muted { background: var(--muted); margin-left: 6px; vertical-align: middle; }
.map-proj-tag {
  font-size: 11px;
  padding: 2px 8px;
  border-radius: 10px;
  font-weight: 500;
}
.map-children-wrap {
  padding-left: 26px;
  border-left: 1px solid var(--border);
  margin-left: 9px;
  margin-top: 2px;
}
.map-orphans {
  margin-top: 22px;
  padding-top: 18px;
  border-top: 1px solid var(--border);
}
.map-orphans summary {
  cursor: pointer;
  font-size: 13px;
  color: var(--muted);
  user-select: none;
  outline: none;
  list-style: none;
}
.map-orphans summary::-webkit-details-marker { display: none; }
.map-orphans summary::before { content: '\25B8  '; font-size: 11px; }
details.map-orphans[open] summary::before { content: '\25BE  '; }
.map-orphans summary:hover { color: var(--fg); }
.map-orphan-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 12px;
}/* Extracted styles from index.html to make the project easier to maintain.
   This file contains all of the CSS previously inlined in the HTML.
   Color variables and responsive rules have been preserved. */

:root {
  --bg: #0b0f14;
  --fg: #e8eef7;
  --muted: #a9b6c6;
  --card: #121924;
  --acc: #4ea1ff;
  /* Additional semantic color variables for borders, buttons and inputs */
  --border: #1e2938;
  --btn-bg: #122134;
  --btn-border: #274768;
  --pill-border: #334759;
  --header-bg: #0e141d;
  --input-bg: #0f1621;
  --input-border: #203041;
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: system-ui, Segoe UI, Roboto, Helvetica, Arial;
  background: var(--bg);
  color: var(--fg);
  /* Improve readability on all devices by increasing base font size and line height. */
  font-size: 15px;
  line-height: 1.5;
}

header {
  display: flex;
  gap: 12px;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
  background: var(--header-bg);
  position: sticky;
  top: 0;
  z-index: 10;
  border-bottom: 1px solid var(--border);
}

.title {
  font-weight: 700;
  letter-spacing: 0.3px;
}

.search {
  flex: 1;
  max-width: 520px;
}

input[type="text"],
textarea {
  width: 100%;
  /* Use !important to override inline attributes in HTML */
  background: var(--input-bg) !important;
  border: 1px solid var(--input-border) !important;
  color: var(--fg) !important;
  padding: 10px;
  border-radius: 10px;
  outline: none;
}

textarea {
  min-height: 140px;
  resize: vertical;
}

/* Override inline styles for date inputs to use theme variables */
input[type="date"] {
  background: var(--input-bg) !important;
  border: 1px solid var(--input-border) !important;
  color: var(--fg) !important;
}

main {
  display: grid;
  grid-template-columns: 280px 1fr;
  gap: 16px;
  padding: 16px;
}

aside {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 12px;
  height: calc(100dvh - 88px);
  position: sticky;
  top: 88px;
  overflow: auto;
}

nav button {
  width: 100%;
  text-align: left;
  background: var(--btn-bg);
  border: 1px solid var(--btn-border);
  color: var(--fg);
  padding: 10px 12px;
  margin: 6px 0;
  border-radius: 10px;
  cursor: pointer;
}

nav button.active {
  border-color: var(--acc);
  outline: 2px solid color-mix(in oklab, var(--acc) 40%, transparent);
}

.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 14px;
  margin-bottom: 16px;
}

.row {
  display: flex;
  gap: 10px;
  align-items: center;
}

.btn {
  /* Force override of any inline button color definitions */
  background: var(--btn-bg) !important;
  border: 1px solid var(--btn-border) !important;
  color: var(--fg) !important;
  padding: 8px 12px;
  border-radius: 10px;
  cursor: pointer;
}

.btn.acc {
  border-color: var(--acc) !important;
}

.pill {
  display: inline-block;
  padding: 2px 8px;
  border: 1px solid var(--pill-border);
  border-radius: 999px;
  font-size: 12px;
  color: var(--muted);
  margin-right: 6px;
}

/* --- Monthly view styling --- */
/* Monthly page now uses standard app styling for consistency */

/* Improved day selection with checkboxes */
.monthly-days-grid {
  display: flex;
  flex-direction: column;
  gap: 1px;
  background: var(--input-bg);
  border: 1px solid var(--input-border);
  border-radius: 8px;
  padding: 6px;
  /* Let the container grow up to seven rows (~28px each) and scroll if necessary. */
  max-height: 196px;
  overflow-y: auto;
}

.monthly-day-option {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 2px 8px;
  border-radius: 2px;
  cursor: pointer;
  font-size: 13px;
  transition: background-color 0.2s ease;
}

.monthly-day-option:hover {
  background: var(--card);
}

.monthly-day-option input[type="checkbox"] {
  margin: 0;
  accent-color: var(--acc);
}

.monthly-day-option input[type="checkbox"]:checked + span {
  font-weight: 500;
  color: var(--acc);
}

/* Task list view modes */
.monthly-tasks-container.grid-view {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 12px;
}

.monthly-tasks-container.list-view {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.monthly-tasks-container.grid-view .monthly-task-item {
  background: var(--input-bg);
  border: 1px solid var(--input-border);
  border-radius: 8px;
  padding: 12px;
  transition: all 0.2s ease;
  min-height: 80px;
}

.monthly-tasks-container.list-view .monthly-task-item {
  background: var(--input-bg);
  border: 1px solid var(--input-border);
  border-radius: 8px;
  padding: 10px 12px;
  transition: all 0.2s ease;
}

.monthly-task-item:hover {
  border-color: var(--acc);
  transform: translateY(-1px);
}

.monthly-task-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 6px;
}

.monthly-task-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--fg);
  line-height: 1.3;
  flex: 1;
  margin-right: 8px;
}

.monthly-task-delete {
  padding: 3px 6px;
  font-size: 11px;
  border-radius: 4px;
  background: transparent;
  border: 1px solid #ff6b6b;
  color: #ff6b6b;
  transition: all 0.2s ease;
  cursor: pointer;
  flex-shrink: 0;
}

.monthly-task-delete:hover {
  background: #ff6b6b;
  color: white;
}

.monthly-task-schedule {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  flex-wrap: wrap;
}

.monthly-schedule-badge {
  background: var(--acc);
  color: white;
  padding: 2px 6px;
  border-radius: 10px;
  font-size: 11px;
  font-weight: 500;
}

/* View toggle buttons */
#monthlyViewGrid.active,
#monthlyViewList.active {
  background: var(--acc);
  color: white;
  border-color: var(--acc);
}

/* Legacy styles maintained for backward compatibility */
.monthly .monthly-select {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-width: 120px;
}

.monthly .monthly-select label {
  font-size: 12px;
  margin-bottom: 4px;
  color: var(--muted);
}

.monthly .monthly-select select {
  background: var(--input-bg);
  border: 1px solid var(--input-border);
  color: var(--fg);
  padding: 6px;
  border-radius: 8px;
  width: 100px;
  height: 160px;
}

/* Style each scheduled task row in the monthly list */
.monthly #monthlyTasksList > .row {
  background: var(--input-bg);
  border: 1px solid var(--input-border);
  border-radius: 10px;
  padding: 6px 10px;
}

/* Make the pill stand out a bit more in the monthly list */
.monthly #monthlyTasksList .pill {
  background: var(--btn-bg);
  border-color: var(--pill-border);
  color: var(--acc);
}

/* Responsive grid layout for monthly form */
@media (max-width: 700px) {
  .monthly-container .card:first-child > div:nth-child(2) {
    grid-template-columns: 1fr !important;
    gap: 12px !important;
  }
  
  .monthly-container .card:first-child .row:last-child {
    flex-direction: column;
    align-items: stretch;
    gap: 12px;
  }
  
  .monthly-container .card:first-child .row:last-child > div:first-child {
    justify-content: center;
  }
  
  .monthly-tasks-container.grid-view {
    grid-template-columns: 1fr;
  }
}


.list {
  display: grid;
  gap: 8px;
}

/*
 * Ensure task titles wrap cleanly on small screens or when very long.
 * Without this, long titles can overflow and push action buttons off screen.
 */
#taskList .row span,
#projectTaskList .row span,
#backlogList .row span {
  /* Allow text to wrap onto multiple lines */
  word-break: break-word;
  overflow-wrap: anywhere;
  white-space: normal;
  /* Let the text column grow and shrink within its row */
  flex: 1;
  min-width: 0;
}

/* Align multi-line rows to the top instead of center so that
 * checkboxes and buttons remain aligned when titles wrap.
 */
#taskList .row,
#projectTaskList .row,
#backlogList .row {
  align-items: flex-start;
}

.muted {
  color: var(--muted);
  font-size: 12px;
}

.grid-2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

/* Responsive grid: stack cards on narrow screens */
@media (max-width: 600px) {
  .grid-2 {
    grid-template-columns: 1fr;
  }
}

/* Review page specific layout tweaks */
.review .row {
  /* Allow rows to wrap on small screens so content doesn’t overflow */
  flex-wrap: wrap;
  align-items: flex-start;
}

/* Keep inner action rows (button groups) on one line */
.review .row > .row {
  flex-wrap: nowrap;
}

/* Allow tables in review to scroll horizontally if they exceed width */
.review table {
  display: block;
  overflow-x: auto;
  max-width: 100%;
}

footer {
  padding: 16px;
  color: var(--muted);
  text-align: center;
}

a {
  color: var(--acc);
}

.tip {
  position: fixed;
  inset: auto 16px 16px 16px;
  background: var(--header-bg);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 14px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.tip h4 {
  margin: 0 0 6px 0;
}

.kbd {
  border: 1px solid var(--kbd-border);
  border-radius: 6px;
  padding: 0 6px;
  margin: 0 3px;
}

.hidden {
  display: none;
}

/* Markdown preview styling - Enhanced for better readability */
.markdown-preview {
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 20px;
  background: var(--input-bg);
  max-height: 400px;
  overflow-y: auto;
  color: var(--fg);
  font-size: 15px;
  line-height: 1.6;
  font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  outline: none; /* Remove default focus outline */
}

/* Focus state for keyboard navigation */
.markdown-preview:focus {
  border-color: var(--acc);
  box-shadow: 0 0 0 2px rgba(78, 161, 255, 0.2);
}

/* Enhanced typography hierarchy */
.markdown-preview h1 { 
  font-size: 1.8em; 
  margin-top: 1.2em; 
  margin-bottom: 0.6em; 
  font-weight: 700;
  color: var(--acc);
  border-bottom: 2px solid var(--border);
  padding-bottom: 0.3em;
}
.markdown-preview h2 { 
  font-size: 1.5em; 
  margin-top: 1.1em; 
  margin-bottom: 0.5em; 
  font-weight: 600;
  color: var(--fg);
}
.markdown-preview h3 { 
  font-size: 1.3em; 
  margin-top: 1em; 
  margin-bottom: 0.5em; 
  font-weight: 600;
  color: var(--fg);
}
.markdown-preview h4 { 
  font-size: 1.2em; 
  margin-top: 0.9em; 
  margin-bottom: 0.4em; 
  font-weight: 600;
  color: var(--muted);
}
.markdown-preview h5 { 
  font-size: 1.1em; 
  margin-top: 0.8em; 
  margin-bottom: 0.4em; 
  font-weight: 600;
  color: var(--muted);
}
.markdown-preview h6 { 
  font-size: 1em; 
  margin-top: 0.8em; 
  margin-bottom: 0.4em; 
  font-weight: 600;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Enhanced paragraph spacing */
.markdown-preview p {
  margin-bottom: 1em;
  line-height: 1.7;
}

/* Better list styling */
.markdown-preview ul, .markdown-preview ol { 
  margin: 0.8em 0 1.2em 1.5em; 
  padding-left: 0; 
}
.markdown-preview li { 
  margin-bottom: 0.6em; 
  line-height: 1.6;
}
.markdown-preview ul li {
  list-style-type: disc;
}
.markdown-preview ol li {
  list-style-type: decimal;
}

/* Enhanced code blocks */
.markdown-preview pre {
  background: var(--card);
  padding: 16px;
  border-radius: 8px;
  overflow-x: auto;
  margin: 1.2em 0;
  border: 1px solid var(--border);
  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
  font-size: 14px;
  line-height: 1.4;
  box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
}

/* Enhanced inline code */
.markdown-preview code {
  background: var(--card);
  padding: 3px 6px;
  border-radius: 4px;
  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
  font-size: 0.9em;
  color: var(--acc);
  border: 1px solid var(--border);
}

/* Code blocks should not have the inline code styling */
.markdown-preview pre code {
  background: transparent;
  padding: 0;
  border: none;
  color: var(--fg);
  font-size: inherit;
}

/* Enhanced blockquotes */
.markdown-preview blockquote {
  border-left: 4px solid var(--acc);
  padding: 12px 16px;
  margin: 1.2em 0;
  background: var(--card);
  border-radius: 0 8px 8px 0;
  font-style: italic;
  color: var(--muted);
}

/* Enhanced links */
.markdown-preview a {
  color: var(--acc);
  text-decoration: none;
  border-bottom: 1px solid transparent;
  transition: border-color 0.2s ease;
}
.markdown-preview a:hover {
  border-bottom-color: var(--acc);
}

/* Enhanced tables */
.markdown-preview table {
  width: 100%;
  border-collapse: collapse;
  margin: 1.2em 0;
  background: var(--card);
  border-radius: 8px;
  overflow: hidden;
}
.markdown-preview th, .markdown-preview td {
  padding: 12px 16px;
  text-align: left;
  border-bottom: 1px solid var(--border);
}
.markdown-preview th {
  background: var(--bg);
  font-weight: 600;
  color: var(--acc);
}

/* Enhanced horizontal rules */
.markdown-preview hr {
  border: none;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--border), transparent);
  margin: 2em 0;
}

/* Enhanced emphasis */
.markdown-preview strong {
  font-weight: 700;
  color: var(--fg);
}
.markdown-preview em {
  font-style: italic;
  color: var(--muted);
}

/* Project selector container for mobile: visible on small screens, hidden on desktop */
#projectSelectorContainer {
  /* Container for the project drop‑down in mobile view */
  margin-bottom: 8px;
}
@media (min-width: 901px) {
  /* Hide the selector on larger screens; the sidebar is used instead */
  #projectSelectorContainer {
    display: none;
  }
}

/* Remove sticky positioning so the selector doesn’t float over content on mobile */
@media (max-width: 900px) {
  #projectSelectorContainer {
    position: static;
    top: auto;
    z-index: auto;
  }
}

/* ------------------------------------------------------------------ */
/* Custom modal styles for confirmations and prompts                  */
/* These modals are used instead of native browser dialogs to match  */
/* the app’s look and feel.                                          */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 500;
}
.modal {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 16px;
  width: 90%;
  max-width: 360px;
  color: var(--fg);
}
.modal-body {
  margin-bottom: 12px;
  line-height: 1.4;
}
.modal-footer {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}
.modal input[type="text"],
.modal input[type="date"],
.modal textarea {
  width: 100%;
  margin-top: 8px;
  background: var(--input-bg);
  border: 1px solid var(--input-border);
  color: var(--fg);
  border-radius: 8px;
  padding: 8px;
  box-sizing: border-box;
}
.modal .btn {
  /* Buttons inside modal should follow theme */
  background: var(--btn-bg);
  border: 1px solid var(--btn-border);
  color: var(--fg);
  border-radius: 8px;
  padding: 6px 10px;
  cursor: pointer;
  font-size: 14px;
}
.modal .btn.acc {
  border-color: var(--acc);
}

/* Project sidebar buttons */
.projBtn {
  width: 100%;
  text-align: left;
  background: var(--btn-bg);
  border: 1px solid var(--btn-border);
  color: var(--fg);
  padding: 8px 10px;
  margin: 4px 0;
  border-radius: 10px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.projBtn.active {
  border-color: var(--acc);
  outline: 2px solid color-mix(in oklab, var(--acc) 40%, transparent);
}

.projBtn .projDel {
  font-size: 12px;
  opacity: 0.55;
  padding: 2px 6px;
  border-radius: 6px;
  cursor: pointer;
}

.projBtn .projDel:hover {
  opacity: 1;
  background: var(--btn-active-bg);
  color: #ff6b6b;
}

/* Responsive enhancements */
#menuToggle {
  display: none;
  margin-right: 8px;
}

.hide-mobile {
  display: block;
}

#mobileBar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: var(--header-bg);
  border-top: 1px solid var(--border);
  display: none;
  z-index: 120;
  padding: 6px 8px;
  gap: 6px;
}

#sketchModal {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 300;
  padding: 16px;
}

#sketchModal.show {
  display: flex;
}

#sketchModal .sketchInner {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 12px;
  max-width: 100%;
}

#sketchPad {
  background: var(--input-bg);
  border: 1px solid var(--btn-border);
  border-radius: 12px;
  touch-action: none;
  max-width: 100%;
  height: auto;
}

#mobileBar .btn.active {
  border-color: var(--acc);
  background: var(--btn-active-bg);
}

@media (max-width: 900px) {
  main {
    grid-template-columns: 1fr;
  }
  aside {
    position: fixed;
    top: 0;
    left: 0;
    height: 100dvh;
    transform: translateX(-100%);
    transition: transform 0.25s;
    background: var(--card);
    width: 260px;
    z-index: 200;
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.4);
  }
  body.drawer-open aside {
    transform: translateX(0);
  }
  body.drawer-open:after {
    content: '';
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(2px);
    z-index: 150;
  }
  #menuToggle {
    display: inline-block;
  }
  .hide-mobile {
    display: none;
  }
  #mobileBar {
    display: flex;
  }
  body {
    padding-bottom: 74px;
  }
  header {
    gap: 6px;
  }
  /* Stack cards when grid-2 is used on mobile to prevent narrow columns */
  .grid-2 {
    grid-template-columns: 1fr;
  }
  /* Increase scratchpad height on mobile to make it usable */
  #scratch {
    min-height: 250px;
  }
  /* Show a visible add button for quick task entry in mobile */
  #taskAddBtn {
    display: inline-block;
  }

  /* Stack quick capture input and button vertically on narrow screens for better accessibility */
  #quickCapture {
    flex: 1 1 100%;
    min-width: 0;
    width: 100%;
  }
  #captureBtn {
    width: 100%;
  }

  /* Stack task input, priority, due date, and Add button vertically on mobile */
  #taskTitle,
  #taskPriority,
  #taskDueDate,
  #taskAddBtn {
    width: 100%;
  }

/* Voice recorder modal */
#voiceModal {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 300;
  padding: 16px;
}

#voiceModal.show {
  display: flex;
}

#voiceModal .sketchInner {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 12px;
  max-width: 100%;
}

/* Make the mobile bar scroll horizontally on small screens */
#mobileBar {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scroll-snap-type: x mandatory;
}

#mobileBar .btn {
  /* Override inline flex values on mobile bar buttons to allow horizontal scrolling */
  flex: 0 0 auto !important;
  scroll-snap-align: start;
  white-space: nowrap;
}

/* Add subtle gradient edges to hint scrollability */
#mobileBar::before,
#mobileBar::after {
  content: "";
  position: sticky;
  top: 0;
  width: 16px;
  height: 100%;
  z-index: 1;
  pointer-events: none;
}

#mobileBar::before {
  left: 0;
  background: linear-gradient(to right, var(--header-bg), rgba(14, 20, 29, 0));
}

#mobileBar::after {
  right: 0;
  background: linear-gradient(to left, var(--header-bg), rgba(14, 20, 29, 0));
}

/* Monthly day selector overflow adjustments */
.monthly-days-grid {
  overflow-y: auto;
  max-height: 196px;
}

.monthly .monthly-select select {
  height: auto;
  /* Match the height of seven day items (~196px) and allow scroll */
  max-height: 196px;
  overflow-y: auto;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.monthly-day-option span {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  flex: 1;
}

  /* Remove sticky positioning of project selector on mobile */
  #projectSelectorContainer {
    /* previously sticky; now static so it scrolls naturally */
    position: static;
    top: auto;
    z-index: auto;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    margin-bottom: 8px;
  }
}

/* Hide the task add button on larger screens since Enter key works well */
@media (min-width: 901px) {
  #taskAddBtn {
    display: none;
  }
}

.btn.danger {
  color: var(--danger-color, #ff6b6b);
  border-color: var(--danger-color, #ff6b6b);
  background: transparent;
}
.btn.danger:hover {
  background: var(--danger-color, #ff6b6b);
  color: var(--bg, #fff);
}

/* Modal styling for link and task edit modals */
#linkModal,
#taskModal {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 300;
  padding: 16px;
}
#linkModal.show,
#taskModal.show {
  display: flex;
}
#linkModal .sketchInner,
#taskModal .sketchInner {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 16px;
  max-width: 100%;
  max-height: 90vh;
  overflow-y: auto;
}

/* Note Map styles defined above near #taskModal textarea */

/* Ensure date pickers work properly - specific styling to override inline styles */
#taskDueDate,
#projTaskDueDate,
#taskEditDue {
  background: var(--input-bg) !important;
  border: 1px solid var(--input-border) !important;
  color: var(--fg) !important;
  padding: 8px !important;
  border-radius: 6px !important;
  min-width: 140px;
  cursor: pointer;
  font-size: 14px;
  color-scheme: dark;
}

/* Ensure the calendar picker icon is visible and clickable with blue color */
#taskDueDate::-webkit-calendar-picker-indicator,
#projTaskDueDate::-webkit-calendar-picker-indicator,
#taskEditDue::-webkit-calendar-picker-indicator {
  cursor: pointer;
  opacity: 0.8;
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%234ea1ff'%3e%3cpath fill-rule='evenodd' d='M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z' clip-rule='evenodd'/%3e%3c/svg%3e");
  background-size: 16px 16px;
  background-repeat: no-repeat;
  background-position: center;
  width: 20px;
  height: 20px;
}

#taskDueDate::-webkit-calendar-picker-indicator:hover,
#projTaskDueDate::-webkit-calendar-picker-indicator:hover,
#taskEditDue::-webkit-calendar-picker-indicator:hover {
  opacity: 1;
}

/* Dark theme for date picker calendar popup */
#taskDueDate::-webkit-datetime-edit,
#projTaskDueDate::-webkit-datetime-edit,
#taskEditDue::-webkit-datetime-edit {
  color: var(--fg);
  background: var(--input-bg);
}

#taskDueDate::-webkit-datetime-edit-text,
#projTaskDueDate::-webkit-datetime-edit-text,
#taskEditDue::-webkit-datetime-edit-text {
  color: var(--muted);
}

#taskDueDate::-webkit-datetime-edit-month-field,
#taskDueDate::-webkit-datetime-edit-day-field,
#taskDueDate::-webkit-datetime-edit-year-field,
#projTaskDueDate::-webkit-datetime-edit-month-field,
#projTaskDueDate::-webkit-datetime-edit-day-field,
#projTaskDueDate::-webkit-datetime-edit-year-field,
#taskEditDue::-webkit-datetime-edit-month-field,
#taskEditDue::-webkit-datetime-edit-day-field,
#taskEditDue::-webkit-datetime-edit-year-field {
  color: var(--fg);
  background: transparent;
}

#taskDueDate::-webkit-datetime-edit-month-field:focus,
#taskDueDate::-webkit-datetime-edit-day-field:focus,
#taskDueDate::-webkit-datetime-edit-year-field:focus,
#projTaskDueDate::-webkit-datetime-edit-month-field:focus,
#projTaskDueDate::-webkit-datetime-edit-day-field:focus,
#projTaskDueDate::-webkit-datetime-edit-year-field:focus,
#taskEditDue::-webkit-datetime-edit-month-field:focus,
#taskEditDue::-webkit-datetime-edit-day-field:focus,
#taskEditDue::-webkit-datetime-edit-year-field:focus {
  background: var(--acc);
  color: white;
  outline: none;
}

/* Global dark theme for all date picker popups */
input[type="date"] {
  color-scheme: dark;
}

/* Additional custom styling for calendar popup elements */
input[type="date"]::-webkit-inner-spin-button,
input[type="date"]::-webkit-clear-button {
  display: none;
}

/* Simplified approach for calendar popup styling */
input[type="date"] {
  accent-color: #4ea1ff;
}

/* --- Notebook styles --- */
.nb-card:hover {
  opacity: 0.85;
}

/* Mood button active state — higher specificity than .btn to guarantee override */
button.btn.mood-btn--active {
  background: var(--acc) !important;
  border-color: var(--acc) !important;
  color: #fff !important;
  transform: scale(1.15);
  box-shadow: 0 0 0 2px var(--acc);
}
.mood-btn {
  transition: transform 0.12s, box-shadow 0.12s;
}
.nb-toc-item.nb-drag-over {
  border-color: var(--acc) !important;
  box-shadow: 0 0 0 2px var(--acc);
}
.nb-toc-item:hover {
  opacity: 0.85;
}
}
/* ==========================================================
   VISUAL REFRESH — overrides earlier declarations via cascade
   Pure cosmetic layer; zero layout or selector changes.
   ========================================================== */

/* --- Updated colour palette --- */
:root {
  --bg: #080c11;
  --fg: #dde6f0;
  --muted: #8fa3b8;
  --card: #0f1620;
  --card-hover: #141e2e;
  --acc: #4ea1ff;
  --acc-dim: rgba(78,161,255,0.12);
  --border: #1a2538;
  --btn-bg: #0f1e30;
  --btn-border: #1f3d5c;
  --pill-border: #2a4060;
  --header-bg: rgba(8,12,17,0.85);
  --input-bg: #090e17;
  --input-border: #1a2e44;
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.5), 0 1px 2px rgba(0,0,0,0.3);
  --shadow-md: 0 4px 18px rgba(0,0,0,0.55), 0 2px 6px rgba(0,0,0,0.3);
}

/* --- Font smoothing --- */
body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial;
}

/* --- Frosted glass header + accent brand name --- */
header {
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  background: var(--header-bg);
}
.title {
  color: var(--acc);
  font-size: 16px;
  font-weight: 700;
  text-shadow: 0 0 22px rgba(78,161,255,0.35);
}

/* --- Sidebar/aside elevation --- */
aside {
  box-shadow: var(--shadow-sm);
}

/* --- Nav: clean minimal style, blue active state --- */
nav button {
  background: transparent !important;
  border: 1px solid transparent !important;
  color: var(--muted) !important;
  margin: 3px 0;
  font-size: 13px;
  font-weight: 500;
  transition: background 0.15s ease, color 0.15s ease, border-color 0.15s ease;
  padding: 9px 12px;
}
nav button:hover {
  background: var(--card-hover) !important;
  color: var(--fg) !important;
  border-color: var(--border) !important;
}
nav button.active {
  background: var(--acc-dim) !important;
  border-color: rgba(78,161,255,0.35) !important;
  color: var(--acc) !important;
  font-weight: 600;
  outline: none;
}

/* --- Cards: depth/elevation on hover --- */
.card {
  box-shadow: var(--shadow-sm);
  transition: box-shadow 0.2s ease, border-color 0.2s ease;
}
.card:hover {
  box-shadow: var(--shadow-md);
  border-color: #1e3045;
}

/* --- Buttons: transitions, lift on hover, accent gradient --- */
.btn {
  transition: background 0.15s ease, border-color 0.15s ease,
              transform 0.1s ease, box-shadow 0.15s ease !important;
  font-size: 13px;
}
.btn:hover {
  background: var(--card-hover) !important;
  border-color: #2d5578 !important;
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(0,0,0,0.4);
}
.btn:active {
  transform: translateY(0) !important;
  box-shadow: none !important;
}
/* Accent button: blue-tinted gradient */
.btn.acc {
  background: linear-gradient(135deg,
    rgba(78,161,255,0.18) 0%,
    rgba(78,161,255,0.07) 100%) !important;
  border-color: rgba(78,161,255,0.65) !important;
  color: var(--acc) !important;
}
.btn.acc:hover {
  background: linear-gradient(135deg,
    rgba(78,161,255,0.28) 0%,
    rgba(78,161,255,0.14) 100%) !important;
  border-color: var(--acc) !important;
  box-shadow: 0 2px 14px rgba(78,161,255,0.22) !important;
}

/* --- Inputs: accent focus ring --- */
input[type="text"]:focus,
input[type="date"]:focus,
textarea:focus {
  border-color: rgba(78,161,255,0.7) !important;
  box-shadow: 0 0 0 3px rgba(78,161,255,0.14) !important;
  outline: none;
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
}

/* --- Project sidebar buttons: match nav style --- */
.projBtn {
  background: transparent !important;
  border: 1px solid transparent !important;
  color: var(--muted) !important;
  font-size: 13px;
  transition: background 0.15s ease, color 0.15s ease, border-color 0.15s ease;
  margin: 3px 0;
}
.projBtn:hover {
  background: var(--card-hover) !important;
  color: var(--fg) !important;
  border-color: var(--border) !important;
}
.projBtn.active {
  background: var(--acc-dim) !important;
  border-color: rgba(78,161,255,0.4) !important;
  color: var(--acc) !important;
  font-weight: 600;
  outline: none;
}

/* --- Pills: tighter, more refined --- */
.pill {
  font-size: 11px;
  font-weight: 500;
  letter-spacing: 0.2px;
  padding: 2px 9px;
}

/* --- Themed scrollbar (Webkit) --- */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb {
  background: #1e3550;
  border-radius: 3px;
}
::-webkit-scrollbar-thumb:hover { background: #2a4a6e; }

/* --- Select elements: match input theme --- */
select {
  background: var(--input-bg);
  border: 1px solid var(--input-border);
  color: var(--fg);
  border-radius: 8px;
  transition: border-color 0.15s ease;
}
select:focus {
  border-color: rgba(78,161,255,0.7);
  outline: none;
}

/* ==========================================================
   VISUAL REFRESH — Phase 2: State-of-the-art upgrade
   All additive overrides via cascade — zero layout changes.
   ========================================================== */

/* --- Inter font (Google Fonts CDN) --- */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

/* --- Apply Inter everywhere + smarter bg --- */
:root {
  --font: 'Inter', system-ui, -apple-system, 'Segoe UI', sans-serif;
}
*, *::before, *::after {
  font-family: var(--font) !important;
}
body {
  background: radial-gradient(ellipse 90% 65% at 50% -10%,
    rgba(30,55,100,0.18) 0%, transparent 70%),
    var(--bg) !important;
  background-attachment: fixed !important;
}

/* --- Brand name: gradient text --- */
.title {
  background: linear-gradient(135deg, #6eb5ff 0%, #4ea1ff 50%, #a78bfa 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-size: 16px;
  font-weight: 700;
  letter-spacing: -0.3px;
  text-shadow: none; /* gradient text + text-shadow = invisible; use drop-filter instead */
  filter: drop-shadow(0 0 18px rgba(78,161,255,0.4));
}

/* --- Header: sharper bottom border, better padding --- */
header {
  border-bottom: 1px solid rgba(78,161,255,0.12) !important;
  padding: 12px 18px !important;
}

/* --- Sidebar/aside: glass surface --- */
aside {
  backdrop-filter: blur(20px) saturate(160%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(160%) !important;
  background: rgba(10,17,30,0.75) !important;
  border: 1px solid rgba(255,255,255,0.055) !important;
  border-radius: 20px !important;
  box-shadow: 0 8px 32px rgba(0,0,0,0.45),
              inset 0 1px 0 rgba(255,255,255,0.06) !important;
}

/* --- Nav buttons: left-bar active indicator --- */
nav button {
  border-radius: 10px !important;
  font-size: 13px;
  font-weight: 500;
  letter-spacing: -0.1px;
  padding: 9px 12px !important;
}
nav button.active {
  background: rgba(78,161,255,0.1) !important;
  border-color: transparent !important;
  color: #8dc8ff !important;
  font-weight: 600;
  box-shadow: inset 3px 0 0 #4ea1ff !important;
}
nav button:hover:not(.active) {
  background: rgba(255,255,255,0.045) !important;
  border-color: rgba(255,255,255,0.06) !important;
}

/* --- Cards: lifted glass look, edge highlight --- */
.card {
  border-radius: 18px !important;
  border-color: rgba(255,255,255,0.055) !important;
  background: linear-gradient(160deg,
    rgba(20,30,48,0.95) 0%,
    rgba(12,18,28,0.98) 100%) !important;
  box-shadow: 0 1px 3px rgba(0,0,0,0.5),
              0 4px 16px rgba(0,0,0,0.35),
              inset 0 1px 0 rgba(255,255,255,0.06) !important;
  transition: box-shadow 0.25s ease, transform 0.2s ease,
              border-color 0.2s ease !important;
}
.card:hover {
  box-shadow: 0 2px 6px rgba(0,0,0,0.5),
              0 8px 28px rgba(0,0,0,0.45),
              inset 0 1px 0 rgba(255,255,255,0.09) !important;
  border-color: rgba(78,161,255,0.15) !important;
  transform: translateY(-1px);
}

/* --- Buttons: surface gradient, sharper feel --- */
.btn {
  border-radius: 10px !important;
  font-size: 13px;
  font-weight: 500;
  letter-spacing: -0.1px;
  background: linear-gradient(180deg,
    rgba(30,48,72,0.8) 0%,
    rgba(18,32,50,0.9) 100%) !important;
  border-color: rgba(255,255,255,0.1) !important;
  box-shadow: 0 1px 2px rgba(0,0,0,0.4),
              inset 0 1px 0 rgba(255,255,255,0.06) !important;
  transition: all 0.15s ease !important;
}
.btn:hover:not(:disabled) {
  background: linear-gradient(180deg,
    rgba(40,60,88,0.9) 0%,
    rgba(28,44,66,1) 100%) !important;
  border-color: rgba(255,255,255,0.18) !important;
  transform: translateY(-1px) !important;
  box-shadow: 0 3px 10px rgba(0,0,0,0.45),
              inset 0 1px 0 rgba(255,255,255,0.09) !important;
}
.btn:active:not(:disabled) {
  transform: translateY(0) !important;
  box-shadow: 0 1px 2px rgba(0,0,0,0.4),
              inset 0 1px 0 rgba(255,255,255,0.04) !important;
}
/* Accent: vivid blue gradient */
.btn.acc {
  background: linear-gradient(135deg,
    rgba(78,161,255,0.25) 0%,
    rgba(60,130,220,0.15) 100%) !important;
  border-color: rgba(78,161,255,0.7) !important;
  color: #8dc8ff !important;
  box-shadow: 0 1px 2px rgba(0,0,0,0.4),
              0 0 12px rgba(78,161,255,0.1),
              inset 0 1px 0 rgba(255,255,255,0.08) !important;
}
.btn.acc:hover {
  background: linear-gradient(135deg,
    rgba(78,161,255,0.35) 0%,
    rgba(60,130,220,0.22) 100%) !important;
  border-color: #4ea1ff !important;
  box-shadow: 0 2px 10px rgba(78,161,255,0.28),
              inset 0 1px 0 rgba(255,255,255,0.12) !important;
}

/* --- Inputs: larger radius, premium feel --- */
input[type="text"],
input[type="date"],
input[type="search"],
textarea,
select {
  border-radius: 12px !important;
  background: rgba(8,14,24,0.7) !important;
  border: 1px solid rgba(255,255,255,0.08) !important;
  color: var(--fg) !important;
  transition: border-color 0.15s ease, box-shadow 0.15s ease !important;
}
input[type="text"]:focus,
input[type="date"]:focus,
input[type="search"]:focus,
textarea:focus,
select:focus {
  border-color: rgba(78,161,255,0.6) !important;
  box-shadow: 0 0 0 3px rgba(78,161,255,0.12),
              inset 0 1px 3px rgba(0,0,0,0.2) !important;
  background: rgba(10,18,30,0.85) !important;
}

/* --- Project buttons: match nav style --- */
.projBtn {
  border-radius: 10px !important;
  font-size: 13px !important;
}
.projBtn.active {
  background: rgba(78,161,255,0.1) !important;
  border-color: transparent !important;
  color: #8dc8ff !important;
  box-shadow: inset 3px 0 0 #4ea1ff !important;
  outline: none !important;
}

/* --- Pills: refined, semi-transparent --- */
.pill {
  border-radius: 6px !important;
  background: rgba(78,161,255,0.08);
  border-color: rgba(78,161,255,0.2) !important;
  color: #8dc8ff !important;
  font-size: 11px;
  font-weight: 500;
  padding: 2px 8px !important;
}

/* --- Scrollbar: thinner, accent thumb --- */
::-webkit-scrollbar { width: 5px !important; height: 5px !important; }
::-webkit-scrollbar-track { background: transparent !important; }
::-webkit-scrollbar-thumb {
  background: rgba(78,161,255,0.25) !important;
  border-radius: 99px !important;
}
::-webkit-scrollbar-thumb:hover {
  background: rgba(78,161,255,0.5) !important;
}

/* --- Modals: elevated glass --- */
#linkModal, #taskModal,
.modal, [id$="Modal"] {
  border-radius: 20px !important;
  border-color: rgba(255,255,255,0.08) !important;
  background: rgba(10,17,30,0.92) !important;
  backdrop-filter: blur(24px) saturate(160%) !important;
  -webkit-backdrop-filter: blur(24px) saturate(160%) !important;
  box-shadow: 0 24px 80px rgba(0,0,0,0.7),
              inset 0 1px 0 rgba(255,255,255,0.08) !important;
}

/* --- Headings inside cards: tighter weight --- */
.card h2, .card h3, .card h4 {
  font-weight: 600;
  letter-spacing: -0.3px;
}

/* --- Muted text: slightly lighter --- */
.muted { color: #6e8499 !important; font-size: 12px; }

/* --- Danger button: vivid red tint --- */
.btn.danger {
  background: linear-gradient(135deg,
    rgba(255,80,80,0.15) 0%,
    rgba(200,50,50,0.08) 100%) !important;
  border-color: rgba(255,100,100,0.5) !important;
  color: #ff8585 !important;
}
.btn.danger:hover {
  background: linear-gradient(135deg,
    rgba(255,80,80,0.25) 0%,
    rgba(200,50,50,0.15) 100%) !important;
  border-color: #ff5555 !important;
  box-shadow: 0 2px 10px rgba(255,60,60,0.2) !important;
}

/* ==========================================================
   VISUAL REFRESH — Phase 3: Light Mode (data-theme="light")
   All [data-theme="light"] selectors override Phase 1+2 dark
   glass effects. Cascade + specificity win.
   ========================================================== */

/* --- Base + background --- */
[data-theme="light"] body {
  background: radial-gradient(ellipse 90% 55% at 50% -8%,
    rgba(37,99,235,0.07) 0%, transparent 65%),
    #f3f6fb !important;
  background-attachment: fixed !important;
  color: #0f172a;
}

/* --- Header: white frosted glass --- */
[data-theme="light"] header {
  background: rgba(243,246,251,0.88) !important;
  backdrop-filter: blur(14px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(14px) saturate(180%) !important;
  border-bottom: 1px solid rgba(37,99,235,0.10) !important;
  box-shadow: 0 1px 0 rgba(0,0,0,0.06) !important;
}

/* --- Brand name: deep blue on light bg --- */
[data-theme="light"] .title {
  background: linear-gradient(135deg, #1d4ed8 0%, #2563eb 50%, #7c3aed 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  filter: none;
}

/* --- Sidebar: white glass --- */
[data-theme="light"] aside {
  background: rgba(255,255,255,0.82) !important;
  backdrop-filter: blur(20px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
  border: 1px solid rgba(0,0,0,0.08) !important;
  box-shadow: 0 8px 32px rgba(0,0,0,0.1),
              inset 0 1px 0 rgba(255,255,255,0.9) !important;
}

/* --- Nav buttons: clean white surface --- */
[data-theme="light"] nav button {
  background: transparent !important;
  border: 1px solid transparent !important;
  color: #475569 !important;
}
[data-theme="light"] nav button:hover:not(.active) {
  background: rgba(0,0,0,0.04) !important;
  border-color: rgba(0,0,0,0.06) !important;
  color: #0f172a !important;
}
[data-theme="light"] nav button.active {
  background: rgba(37,99,235,0.08) !important;
  border-color: transparent !important;
  color: #1d4ed8 !important;
  box-shadow: inset 3px 0 0 #2563eb !important;
}

/* --- Cards: white, clean shadow --- */
[data-theme="light"] .card {
  background: #ffffff !important;
  border: 1px solid rgba(0,0,0,0.07) !important;
  box-shadow: 0 1px 3px rgba(0,0,0,0.07),
              0 4px 16px rgba(0,0,0,0.05),
              inset 0 1px 0 rgba(255,255,255,1) !important;
}
[data-theme="light"] .card:hover {
  background: #ffffff !important;
  border-color: rgba(37,99,235,0.18) !important;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08),
              0 8px 24px rgba(37,99,235,0.08),
              inset 0 1px 0 rgba(255,255,255,1) !important;
  transform: translateY(-1px);
}

/* --- Buttons: white surface, clean shadow --- */
[data-theme="light"] .btn {
  background: #ffffff !important;
  border: 1px solid #d1d9e6 !important;
  color: #334155 !important;
  box-shadow: 0 1px 2px rgba(0,0,0,0.07),
              inset 0 1px 0 rgba(255,255,255,0.9) !important;
}
[data-theme="light"] .btn:hover:not(:disabled) {
  background: #f8faff !important;
  border-color: #a8b9d0 !important;
  color: #0f172a !important;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1),
              inset 0 1px 0 rgba(255,255,255,1) !important;
  transform: translateY(-1px) !important;
}
[data-theme="light"] .btn:active:not(:disabled) {
  background: #eff3fb !important;
  transform: translateY(0) !important;
  box-shadow: inset 0 1px 3px rgba(0,0,0,0.1) !important;
}

/* --- Accent button: filled blue on light --- */
[data-theme="light"] .btn.acc {
  background: linear-gradient(180deg, #3b82f6 0%, #2563eb 100%) !important;
  border-color: #1d4ed8 !important;
  color: #ffffff !important;
  box-shadow: 0 1px 3px rgba(37,99,235,0.25),
              0 4px 12px rgba(37,99,235,0.2),
              inset 0 1px 0 rgba(255,255,255,0.2) !important;
}
[data-theme="light"] .btn.acc:hover {
  background: linear-gradient(180deg, #60a5fa 0%, #3b82f6 100%) !important;
  border-color: #2563eb !important;
  box-shadow: 0 2px 8px rgba(37,99,235,0.35),
              0 6px 20px rgba(37,99,235,0.25),
              inset 0 1px 0 rgba(255,255,255,0.25) !important;
}

/* --- Danger button on light bg --- */
[data-theme="light"] .btn.danger {
  background: linear-gradient(180deg, #fef2f2 0%, #fee2e2 100%) !important;
  border-color: #fca5a5 !important;
  color: #dc2626 !important;
}
[data-theme="light"] .btn.danger:hover {
  background: linear-gradient(180deg, #fee2e2 0%, #fecaca 100%) !important;
  border-color: #f87171 !important;
  box-shadow: 0 2px 8px rgba(220,38,38,0.15) !important;
}

/* --- Inputs: white, light border, clean focus ring --- */
[data-theme="light"] input[type="text"],
[data-theme="light"] input[type="date"],
[data-theme="light"] input[type="search"],
[data-theme="light"] textarea,
[data-theme="light"] select {
  background: #ffffff !important;
  border: 1px solid #d1d9e6 !important;
  color: #0f172a !important;
}
[data-theme="light"] input[type="text"]:focus,
[data-theme="light"] input[type="date"]:focus,
[data-theme="light"] input[type="search"]:focus,
[data-theme="light"] textarea:focus,
[data-theme="light"] select:focus {
  border-color: #3b82f6 !important;
  box-shadow: 0 0 0 3px rgba(59,130,246,0.15),
              inset 0 1px 2px rgba(0,0,0,0.04) !important;
  background: #ffffff !important;
}

/* --- Project buttons: same as nav --- */
[data-theme="light"] .projBtn {
  background: transparent !important;
  border: 1px solid transparent !important;
  color: #475569 !important;
}
[data-theme="light"] .projBtn:hover {
  background: rgba(0,0,0,0.04) !important;
  border-color: rgba(0,0,0,0.06) !important;
  color: #0f172a !important;
}
[data-theme="light"] .projBtn.active {
  background: rgba(37,99,235,0.08) !important;
  border-color: transparent !important;
  color: #1d4ed8 !important;
  box-shadow: inset 3px 0 0 #2563eb !important;
  outline: none !important;
}

/* --- Pills: subtle on light --- */
[data-theme="light"] .pill {
  background: rgba(37,99,235,0.07);
  border-color: rgba(37,99,235,0.2) !important;
  color: #1d4ed8 !important;
}

/* --- Modals: white glass --- */
[data-theme="light"] #linkModal,
[data-theme="light"] #taskModal,
[data-theme="light"] .modal,
[data-theme="light"] [id$="Modal"] {
  background: rgba(255,255,255,0.94) !important;
  backdrop-filter: blur(24px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(24px) saturate(180%) !important;
  border: 1px solid rgba(0,0,0,0.08) !important;
  box-shadow: 0 24px 80px rgba(0,0,0,0.18),
              inset 0 1px 0 rgba(255,255,255,1) !important;
}

/* --- Muted text on light bg --- */
[data-theme="light"] .muted { color: #64748b !important; }

/* --- Headings inside cards --- */
[data-theme="light"] .card h2,
[data-theme="light"] .card h3,
[data-theme="light"] .card h4 { color: #0f172a; }

/* --- Scrollbar: light themed --- */
[data-theme="light"] ::-webkit-scrollbar-thumb {
  background: rgba(37,99,235,0.2) !important;
}
[data-theme="light"] ::-webkit-scrollbar-thumb:hover {
  background: rgba(37,99,235,0.4) !important;
}
